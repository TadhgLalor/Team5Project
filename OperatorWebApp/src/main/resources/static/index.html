<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Simple Sidebar - Start Bootstrap Template</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
<!--    <script src="js/scripts.js"></script>-->
    <!-- Custom JS-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karma">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">


</head>
<body>
<div class="d-flex" id="wrapper">
    <!-- Sidebar-->
    <div class="border-end bg-white" id="sidebar-wrapper">
        <div class="sidebar-heading border-bottom bg-light">Team Nexus</div>
        <div class="list-group list-group-flush">
            <button id="findId">Find By Caller Id</button>
            <button id="findNode">Find by Node Id</button>
            <button id="findAll">Find All</button>
            <button id="findFault">Find By Fault</button>
            <button id="nodeFD">Find By Node ID & Date</button>
            <button id="callerIDFD">Find By Caller ID & Date</button>
            <button id="fetchFailuresButton">Fetch Total Failures</button>
        </div>
    </div>
    <!-- Page content wrapper-->
    <div id="page-content-wrapper">
        <!-- Top navigation-->
        <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
            <div class="container-fluid">
                <button class="btn btn-primary" id="sidebarToggle">Toggle Menu</button>
                <h3>Mobile Phone Call Fault Analysis</h3>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    
                </div>
            </div>
        </nav>
        <!-- Page content-->
        <div class="container-fluid" id="addHere">
            <h1 class="mt-4">Radio Station Analyzer</h1>
            <p>The starting state of the menu will appear collapsed on smaller screens, and will appear non-collapsed on larger screens. When toggled using the button below, the menu will change.</p>
            <p>
                Make sure to keep all page content within the
                <code>#page-content-wrapper</code>
                . The top navbar is optional, and just for demonstration. Just create an element with the
                <code>#sidebarToggle</code>
                ID which will toggle the menu when clicked.
            </p>
        </div>
</div>
<!-- Find Caller by id Modal -->
<div class="modal" id="findorder-model" tabindex="-1" role="dialog" aria-labelledby="findorder-model" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content" style="background-color: #2F4F4F; ">
            <div class="modal-header flex-column">
                <img class="mx-auto" src="assets/ericssonLogo.png" height="100px" width="100px" alt="Ericsson Logo" />
            </div>
            <div class="modal-body mx-auto">
                <label for="userentry">Caller ID:</label>
                <div class="btn-group" role="group">
                    <input type="text" id="userentry" name="userentry" />
                    <div class="dropdown-menu" id="ModeldropdownMenuUS8" style="max-height: 200px; overflow-y: auto;"></div>
                </div>
            </div>
            <form id="merchContent" class="container text-center" style="width: max-content;">
                <div>
                    <button type="button" class="btn btn-primary mx-2" id="Find_but">
                        <span data-feather="codesandbox" class="align-text-bottom"></span> Yes</button>
                    <button type="button" class="btn btn-primary mx-2" id="Cancel">
                        <span data-feather="bar-chart-2" class="align-text-bottom"></span> No</button>
                </div>
                <br />
            </form>
        </div>
    </div>
</div>
<!-- End of find caller by id modal-->

<!-- Find by node id Modal -->
<div class="modal" id="findNode-model" tabindex="-1" role="dialog" aria-labelledby="findNode-model" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content" style="background-color: #2F4F4F; /* Dark Slate Gray resembles metallic dark blue */">
            <div class="modal-header flex-column">
                <img class="mx-auto" src="assets/ericssonLogo.png" height="100px" width="100px" alt="Ericsson Logo" />
            </div>
            <div class="modal-body mx-auto">
                <label for="userEntry2">Node ID:</label>
                <div class="btn-group" role="group">
                    <input type="text" id="userEntry2" name="userEntry2" />
                    <div class="dropdown-menu" id="ModeldropdownMenuUS9" style="max-height: 200px; overflow-y: auto;"></div>
                </div>
            </div>
            <form id="merchContent1" class="container text-center" style="width: max-content;">
                <div>
                    <button type="button" class="btn btn-primary mx-2" id="Find_but2">
                        <span data-feather="codesandbox" class="align-text-bottom"></span> Yes</button>
                    <button type="button" class="btn btn-primary mx-2" id="Cancel2">
                        <span data-feather="bar-chart-2" class="align-text-bottom"></span> No</button>
                </div>
                <br />
            </form>
        </div>
    </div>
</div>
<!-- End of find by node id modal-->

<!-- Find by Fault Modal -->
<div class="modal" id="findFault-model" tabindex="-1" role="dialog" aria-labelledby="findFault-model" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content" style="background-color: #2F4F4F; /* Dark Slate Gray resembles metallic dark blue */">
            <div class="modal-header flex-column">
                <img class="mx-auto" src="assets/ericssonLogo.png" height="100px" width="100px" alt="Ericsson Logo" />
            </div>
            <div class="modal-body mx-auto">
                <label for="userEntry3">Fault Reason:</label>
                <div class="btn-group" role="group">
                    <input type="text" id="userEntry3" name="userEntry2" />
                    <div class="dropdown-menu" id="ModeldropdownMenuUS10" style="max-height: 200px; overflow-y: auto;"></div>
                </div>
            </div>
            <form id="merchContent2" class="container text-center" style="width: max-content;">
                <div>
                    <button type="button" class="btn btn-primary mx-2" id="Find_but3">
                        <span data-feather="codesandbox" class="align-text-bottom"></span> Yes</button>
                    <button type="button" class="btn btn-primary mx-2" id="Cancel3">
                        <span data-feather="bar-chart-2" class="align-text-bottom"></span> No</button>
                </div>
                <br />
            </form>
        </div>
    </div>
</div>
<!-- End of find by Fault modal-->

<!-- Total Call Failures Modal -->
	<div class="modal fade" id="alert-message-modal" tabindex="-1" role="dialog" aria-labelledby="alertMessageModalLabel" aria-hidden="true">
	    <div class="modal-dialog" role="document">
	        <div class="modal-content">
	            <div class="modal-header">
	                <!-- <h5 class="modal-title" id="alertMessageModalLabel">Total Call Failures</h5> -->
	                <button type="button" class="close" data-dismiss="modal" aria-label="Close"> 
	                    <span aria-hidden="true">&times;</span>
	                </button>
	            </div>
	            <div class="modal-body" id="information-message"></div>
	            
	        </div>
	    </div>
	</div>
	<!-- End of Total Call Failures Modal -->


<!-- Find data of Node Between Timestamps-->
    <div class="modal" id="NodeTimeFind" tabindex="-1" role="dialog" aria-labelledby="NodeTimeFind"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content" style="background-color: #2F4F4F; ">
                <div class="modal-header flex-column">
                    <img class="mx-auto" src="assets/ericssonLogo.png" height="100px" width="100px"
                         alt="Ericsson Logo" />
                </div>

                <div class="modal-body mx-auto">
                    <label for="userEntryFD">Node ID:</label>
                    <div class="btn-group" role="group">
                        <input type="text" id="userEntryFD" name="userentry" />
                        <div class="dropdown-menu" id="ModeldropdownMenuFD" style="max-height: 200px; overflow-y: auto;"></div>
                    </div>
                </div>

                <div class="modal-body mx-auto">
                    <label for="start_datetimeF">Start Date and Time:</label>
                    <input type="datetime-local" id="start_datetimeF" name="start_datetimeF">

                    <label for="end_datetimeF">End Date and Time:</label>
                    <input type="datetime-local" id="end_datetimeF" name="end_datetimeF">

                    <script>
                        startDatetimeInput = document.getElementById('start_datetimeUS15');
                        endDatetimeInput = document.getElementById('end_datetimeUS15');

                        startDatetimeInput.addEventListener('change', function () {
                            endDatetimeInput.min = this.value;
                            if (endDatetimeInput.value < this.value) {
                                endDatetimeInput.value = this.value;
                            }
                        });

                        endDatetimeInput.addEventListener('change', function () {
                            if (this.value < startDatetimeInput.value) {
                                endDatetimeInput.value = startDatetimeInput.value;
                            }
                        });
                    </script>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary mx-2" data-dismiss="modal" id="cancel4">Cancel</button>
                    <button type="button" class="btn btn-primary mx-2" data-dismiss="modal"
                            id="SubmitQueryF">Search</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Find data of Node Between Timestamps-->
	
<!-- Find data of Caller Between Timestamps-->
<div class="modal" id="CallerTimeFind" tabindex="-1" role="dialog" aria-labelledby="CallerTimeFind"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content" style="background-color: #2F4F4F; ">
                <div class="modal-header flex-column">
                    <img class="mx-auto" src="assets/ericssonLogo.png" height="100px" width="100px"
                         alt="Ericsson Logo" />
                </div>

                <div class="modal-body mx-auto">
                    <label for="userEntryCallerFD">Caller ID:</label>
                    <div class="btn-group" role="group">
                        <input type="text" id="userEntryCallerFD" name="userEntrydd" />
                        <div class="dropdown-menu" id="ModeldropdownMenuFD2" style="max-height: 200px; overflow-y: auto;"></div>
                    </div>
                </div>

                <div class="modal-body mx-auto">
                    <label for="start_datetimeFcaller">Start Date and Time:</label>
                    <input type="datetime-local" id="start_datetimeFcaller" name="start_datetimeF">

                    <label for="end_datetimeFcaller">End Date and Time:</label>
                    <input type="datetime-local" id="end_datetimeFcaller" name="end_datetimeF">

                    <script>
                        startDatetimeInput = document.getElementById('start_datetimecaller');
                        endDatetimeInput = document.getElementById('end_datetimecaller');

                        startDatetimeInput.addEventListener('change', function () {
                            endDatetimeInput.min = this.value;
                            if (endDatetimeInput.value < this.value) {
                                endDatetimeInput.value = this.value;
                            }
                        });

                        endDatetimeInput.addEventListener('change', function () {
                            if (this.value < startDatetimeInput.value) {
                                endDatetimeInput.value = startDatetimeInput.value;
                            }
                        });
                    </script>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary mx-2" data-dismiss="modal" id="cancelcaller">Cancel</button>
                    <button type="button" class="btn btn-primary mx-2" data-dismiss="modal"
                            id="SubmitQueryFcaller">Search</button>
                </div>
            </div>
        </div>
    </div>
<!-- Find data of Caller Between Timestamps-->


<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="js/modalAccess.js"></script>
<script src="js/scripts.js"></script>
<!-- Custom JS for Total Call Failures -->
<script>
    function fetchTotalFailures() {
        var totalFailuresUrl = "http://localhost:8081/api/total-failures";
        $.ajax({
            type: 'GET',
            url: totalFailuresUrl,
            dataType: "json",
            success: function(data) {
                if (data === null || data === undefined) {
                    console.log("No data available");
                    $('#information-message').empty().append('<h5>No Data available</h5>');
                    $('#alert-message-modal').modal('show');
                } else {
                    console.log(data);
                    $('#information-message').empty().append('<h5>Total Call Failures: ' + data + '</h5>');
                    $('#alert-message-modal').modal('show');
                }
            },
            error: function(xhr, textStatus, errorThrown) {
                console.error("AJAX request failed:", textStatus, errorThrown);
                console.error("Status:", xhr.status);
                console.error("Response:", xhr.responseText);
                $('#information-message').empty().append('<h5>Connection issue.</h5>');
                $('#alert-message-modal').modal('show');
            }
        });
    }

    $(document).ready(function() {
        $('#fetchFailuresButton').on('click', fetchTotalFailures);
        
        // Add event listener to clear the modal content when it is hidden
        $('#alert-message-modal').on('hidden.bs.modal', function () {
            $('#information-message').empty();
        });
    });
</script>
<script>
	$(document).ready(function(){
    $('.close').on('click', function(){
        $('#alert-message-modal').modal('hide');
    });
 
    $('.modal-close-button').on('click', function(){
        $('#alert-message-modal').modal('hide');
    });
});
	</script>

</body>
</html>